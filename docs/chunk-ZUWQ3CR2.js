import{a as I}from"./chunk-SF6NHWWK.js";import{Bb as D,Cb as T,Db as j,Eb as q,Fa as p,Fb as M,Gb as w,H as u,J as l,Ja as B,Ka as y,L as E,La as g,Ma as n,Na as o,Oa as b,Q as c,Va as i,Xa as m,Ya as N,Za as R,db as _,ga as d,kb as P,m as v,pa as s,r as S,rb as f,sb as A,tb as O,vb as $,w as F,xa as x,zb as V}from"./chunk-YGH7C5AD.js";var C=class r{baseUrl="https://restcountries.com/v3.1";http=c(I);_regions=["Africa","Americas","Asia","Europe","Oceania"];get regions(){return[...this._regions]}getCountriesByRegion(e){if(!e)return v([]);console.log({region:e});let t=`${this.baseUrl}/region/${e}?fields=cca3,name,borders`;return this.http.get(t)}getCountryByAlphaCode(e){let t=`${this.baseUrl}/alpha/${e}?fields=cca3,name,borders`;return this.http.get(t)}getCountryNamesByCodeArray(e){if(!e||e.length===0)return v([]);let t=[];return e.forEach(a=>{let k=this.getCountryByAlphaCode(a);t.push(k)}),S(t)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var G=(r,e)=>e.cca3;function H(r,e){if(r&1&&(n(0,"option",7),i(1),o()),r&2){let t=e.$implicit;p("value",t),s(),m(" ",t," ")}}function J(r,e){if(r&1&&(n(0,"option",7),i(1),o()),r&2){let t=e.$implicit;p("value",t.cca3),s(),m(" ",t.name.common," ")}}function L(r,e){if(r&1&&(n(0,"option",7),i(1),o()),r&2){let t=e.$implicit;p("value",t.cca3),s(),m(" ",t.name.common," ")}}var h=class r{fb=c(M);countryServices=c(C);regions=d(this.countryServices.regions);countriesByRegion=d([]);borders=d([]);myForm=this.fb.group({region:["",f.required],country:["",f.required],border:["",f.required]});onFormChanged=_(e=>{let t=this.onRegionChanged(),a=this.onCountryChanged();e(()=>{t.unsubscribe(),a.unsubscribe})});onRegionChanged(){return this.myForm.get("region").valueChanges.pipe(l(()=>this.myForm.get("country").setValue("")),l(()=>this.myForm.get("border").setValue("")),l(()=>{this.borders.set([]),this.countriesByRegion.set([])}),u(e=>this.countryServices.getCountriesByRegion(e??""))).subscribe(e=>{this.countriesByRegion.set(e)})}onCountryChanged(){return this.myForm.get("country").valueChanges.pipe(l(()=>this.myForm.get("border").setValue("")),F(e=>e.length>0),u(e=>this.countryServices.getCountryByAlphaCode(e??"")),u(e=>this.countryServices.getCountryNamesByCodeArray(e.borders))).subscribe(e=>{this.borders.set(e)})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=x({type:r,selectors:[["app-country-page"]],decls:39,vars:5,consts:[[1,"mt-3"],[3,"formGroup"],[1,"row","mb-3"],[1,"col"],[1,"form-label"],["formControlName","region",1,"form-control"],["value",""],[3,"value"],["formControlName","country",1,"form-control"],["formControlName","border",1,"form-control"]],template:function(t,a){t&1&&(n(0,"h1",0),i(1,"Selectores anidados"),o(),b(2,"hr"),n(3,"form",1)(4,"div",2)(5,"div",3)(6,"label",4),i(7,"Continente:"),o(),n(8,"select",5)(9,"option",6),i(10,"-- Seleccione Continente --"),o(),y(11,H,2,2,"option",7,B),o()()(),n(13,"div",2)(14,"div",3)(15,"label",4),i(16,"Pa\xEDs:"),o(),n(17,"select",8)(18,"option",6),i(19,"-- Seleccione Pa\xEDs --"),o(),y(20,J,2,2,"option",7,G),o()()(),n(22,"div",2)(23,"div",3)(24,"label",4),i(25,"Fronteras:"),o(),n(26,"select",9)(27,"option",6),i(28,"-- Seleccione la frontera --"),o(),y(29,L,2,2,"option",7,G),o()()()(),n(31,"h3"),i(32,"Formulario"),o(),b(33,"code"),n(34,"p"),i(35),o(),n(36,"p"),i(37),N(38,"json"),o()),t&2&&(s(3),p("formGroup",a.myForm),s(8),g(a.regions()),s(9),g(a.countriesByRegion()),s(9),g(a.borders()),s(6),m("is form valid: ",a.myForm.valid,""),s(2),m("Value: ",R(38,3,a.myForm.value),""))},dependencies:[w,$,j,q,T,A,O,V,D,P],encapsulation:2})};var le=[{path:"",component:h}];export{le as countryRoutes};
